---
title: "Keel Evaluations"
author: "Cheyne Springbett"
date: "10/31/2022"
output: pdf_document
---

# Load libraries
```{r}
library(googlesheets4)
```


# Read in Sheets, combine keel dataset
```{r reading in google sheets}
sheetnames=sheet_names("https://docs.google.com/spreadsheets/d/1ckVjS4Jw9o_eg_l_TAwDFNp_evuu36sFHmXyUqT6YqA")
evalnames=grep("Keel Prominence", sheetnames, value=T)

keels=read_sheet("https://docs.google.com/spreadsheets/d/1ckVjS4Jw9o_eg_l_TAwDFNp_evuu36sFHmXyUqT6YqA", sheet=evalnames[1])

for (i in 2:length(evalnames)){
  keels=rbind(
    keels,
    read_sheet("https://docs.google.com/spreadsheets/d/1ckVjS4Jw9o_eg_l_TAwDFNp_evuu36sFHmXyUqT6YqA", sheet=evalnames[i])
  )
}
keels=data.frame(keels)
```

# Quantify Keel Evals
```{r}
code=c("VP", "P", "A","W", "M", "none")
value=c(4,3,2,1,0,NA)
lookup=data.frame(code,value)

for (i in 1:nrow(keels)){
  for (j in 2:6){
    keels[i,j]=lookup$value[lookup$code==keels[i,j]]
  }
}

```

# Convert to numeric
```{r}
keels$O1=as.numeric(keels$O1)
keels$O2=as.numeric(keels$O2)
keels$O3=as.numeric(keels$O3)
keels$O4=as.numeric(keels$O4)
keels$O5=as.numeric(keels$O5)
```


#Combine to get total means
```{r}
dfmean=data.frame(c(
(aggregate(O1~Octopus_Tank,data=keels,FUN="mean",na.action=na.pass)),
(aggregate(O2~Octopus_Tank,data=keels,FUN="mean",na.action=na.pass)),
(aggregate(O3~Octopus_Tank,data=keels,FUN="mean",na.action=na.pass)),
(aggregate(O4~Octopus_Tank,data=keels,FUN="mean",na.action=na.pass)),
(aggregate(O5~Octopus_Tank,data=keels,FUN="mean",na.action=na.pass))
))

dfmean$Octopus_Tank.1<- NULL
dfmean$Octopus_Tank.2<- NULL
dfmean$Octopus_Tank.3<- NULL
dfmean$Octopus_Tank.4<- NULL

dfmean
```

